@model GeneratorBase.MVC.Models.T_EmployeeInjury
@{
    ViewBag.Title = "Set Search Criteria";
	var parentUrl = new System.Collections.Specialized.NameValueCollection();
    if (Request.UrlReferrer != null && Request.QueryString["IsClear"] == null)
    {
        parentUrl = HttpUtility.ParseQueryString(Request.UrlReferrer.Query);
    }
	var EntityDisplayNameReflector = ModelReflector.Entities.FirstOrDefault(p => p.Name == "T_EmployeeInjury");
	var EntityDisplayName = EntityDisplayNameReflector != null ? EntityDisplayNameReflector.DisplayName : "Employee Injury";
}
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true);
    Html.EnableClientValidation();
<div class="row">
    <div class="col-lg-12">
        <h1 class="page-title">
            <i class="glyphicon glyphicon-search text-primary"></i> @EntityDisplayName <i class="glyphicon glyphicon-chevron-right small"></i> <span>Faceted Search</span>
        </h1>
    </div>
    <!-- /.col-lg-12 -->
</div>

<div style="margin:-5px 5px 5px 0px;">
                @if ( User.CanView("T_EmployeeInjury"))
                { 

				<button class="btn btn-default btn-sm tip-top" type="button" data-original-title="Full Add" data-placement="top" onclick=@Html.Raw("NavigateToUrl('" + Url.Action("Index", "T_EmployeeInjury") + "');")>
					<span class="glyphicon glyphicon-list"></span> List
				</button>
				}
				@if ( User.CanAdd("T_EmployeeInjury"))
                {
					<button class="btn btn-default btn-sm tip-top" type="button" data-original-title="Create New" data-placement="top" onclick=@Html.Raw("NavigateToUrl('" + Url.Action("Create", "T_EmployeeInjury", new { UrlReferrer = Request.Url, AssociatedType=ViewData["AssociatedType"], HostingEntityName = @Convert.ToString(ViewData["HostingEntity"]), HostingEntityID = @Convert.ToString(ViewData["HostingEntityID"]) }, null) + "');")>
						<span class="fam-world-add"></span> Create New
					</button>
                   
                }
		<button class="btn btn-default btn-sm tip-top"  data-placement="top" type="button" data-original-title="Show Graph"  data-toggle="modal" data-target="#ShowGraphT_EmployeeInjury" onclick=@Html.Raw("OpenDashBoard('dvShowGraphT_EmployeeInjury');")>
			<span class="fam-chart-bar"></span> Dashboard
        </button>

	@if (ViewBag.FavoriteItem != null)
    {
        <div class="btn-group">
            <button data-toggle="dropdown"  type="button" class="btn btn-default btn-sm tip-top dropdown-toggle btn-default">
                <span class="fa fa fa-star"></span> Favorite Items
                <span class="caret">    </span>
            </button>
            <ul class="dropdown-menu pull-left">
                @foreach (GeneratorBase.MVC.Models.FavoriteItem fItem in ViewBag.FavoriteItem)
                {
					var linkaddress = GeneratorBase.MVC.Models.CommonFunction.Instance.getBaseUri() + fItem.LinkAddress;
					if(GeneratorBase.MVC.Models.CommonFunction.Instance.getBaseUri().EndsWith("/") && fItem.LinkAddress.StartsWith("/"))
					{
						linkaddress = GeneratorBase.MVC.Models.CommonFunction.Instance.getBaseUri() + fItem.LinkAddress.TrimStart("/".ToCharArray());
					}
					if (!GeneratorBase.MVC.Models.CommonFunction.Instance.getBaseUri().EndsWith("/") && !fItem.LinkAddress.StartsWith("/"))
					{
						linkaddress = GeneratorBase.MVC.Models.CommonFunction.Instance.getBaseUri()+"/" + fItem.LinkAddress.TrimStart("/".ToCharArray());
					}
                    <li>
                        <a href='@linkaddress'>@fItem.Name</a>
                    </li>
                }
            </ul>
        </div>
    }

	<a href="#" class="btn btn-default closeall pull-right btn-sm"><i class="glyphicon glyphicon-chevron-up small"></i> close all</a> <a href="#" class="btn btn-default openall pull-right btn-sm" style="margin-right:5px;"><i class="glyphicon glyphicon-chevron-down small"></i> open all</a>

			</div>
			
			 <div class="fsearch">
			  
			   
					<div class="row">
                        <div class="col-md-12 col-sm-12 col-xs-12">
                            <div class="panel panel-default">
                                <div class="panel-heading clearfix">
                                    <i class="icon-calendar"></i>

                                    <h3 class="panel-title">
                                        All Field Search Criteria
                                    </h3>
                                </div>
                                <div class="panel-body">
                                    <div class='col-sm-12 col-md-12 col-xs-12'>
                                       @{
									var txtGenCriteria = String.IsNullOrEmpty(Convert.ToString(ViewBag.CurrentFilter)) ? "" : Convert.ToString(ViewBag.CurrentFilter);
									}
									<input type="text" id="FSearch" class="form-control" placeholder="Search Criteria" value="@txtGenCriteria" style="font-size:12px"/>


                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

					 <div  id="accordion"> 
					 					 <div class="row">
                        <div class="col-md-12 col-sm-12 col-xs-12">
                            <div class="panel panel-default">
                                <div class="panel-heading clearfix">
                                    <i class="icon-calendar"></i>
                                    <h3 class="panel-title">
								<a data-toggle="collapse" data-parent="#accordion" href="#collapseOne"><i class="glyphicon glyphicon-chevron-down pull-left" style="padding-top:5px; padding-right:5px;"></i> Range Property</a>
                                    </h3>
                                </div>
								<div id="collapseOne" class="panel-collapse in">
                                <div class="panel-body">
                           
			<div class='col-sm-4 col-md-4 col-xs-12'>
                                        <div class='form-group'
                                             title="Accident Date & Time">
											@Html.LabelFor(model => model.T_AccidentDate, new { @class="col-sm-5 col-md-5 col-xs-12" })
                                            <div class="input-group col-sm-7 col-md-7 col-xs-12">
                                                <input type="text" id="T_AccidentDateFrom" name="T_AccidentDateFrom" format = "MM/DD/YYYY hh:mm" class="form-control"  placeholder="From Date"
											 data-val='true' data-val-date='Must be a date.' />
																						<span class="field-validation-valid" data-valmsg-for="T_AccidentDateFrom" data-valmsg-replace="true"></span>	
												                                            
                                    <script type="text/javascript">
                                        $(function () {
                                            $('#T_AccidentDateFrom').datetimepicker({ });
                                        });
                                    </script>
                                <span class="input-group-addon datefiled">
									<input type="text" id="T_AccidentDateTo" name="T_AccidentDateTo" format = "MM/DD/YYYY hh:mm" class="form-control"  placeholder="To Date"
												 data-val='true' data-val-date='Must be a date.'  style="border-radius:0px 4px 4px 0px; border-left:0px"/>
																							<div class="field-validation-valid" style="margin-top: 25px;font-size: 12px;" data-valmsg-for="T_AccidentDateTo" data-valmsg-replace="true"></div>
												                                    <script type="text/javascript">
                                        $(function () {
                                            $('#T_AccidentDateTo').datetimepicker({ });
                                        });
                                    </script>


					<input type="hidden" id="T_AccidentDateFromhdn" />
                    <input type="hidden" id="T_AccidentDateTohdn" />
								</span>
							</div>
                        </div>
                      </div>
			<div class='col-sm-4 col-md-4 col-xs-12'>
                                        <div class='form-group'
                                             title=" Days Off">
											@Html.LabelFor(model => model.T_DaysOff, new { @class="col-sm-5 col-md-5 col-xs-12" })
                                            <div class="input-group col-sm-7 col-md-7 col-xs-12">
												<input type="text" id="T_DaysOffFrom" name="T_DaysOffFrom" class="form-control"  placeholder="From"
												 data-val="true" data-val-number="Must be a number." />
                                            <span class="field-validation-valid" data-valmsg-for="T_DaysOffFrom" data-valmsg-replace="true"></span>
											<span class="input-group-addon datefiled">
												<input type="text" id="T_DaysOffTo" name="T_DaysOffTo" class="form-control"  placeholder="To"	 data-val="true" data-val-number="Must be a number." style="border-radius:0px 4px 4px 0px; border-left:0px"/>
													<div class="field-validation-valid" style="margin-top: 25px;font-size: 12px;" data-valmsg-for="T_DaysOffTo" data-valmsg-replace="true"></div>
											</span>
							</div>
                        </div>
                      </div>

			<div class='col-sm-4 col-md-4 col-xs-12'>
                                        <div class='form-group'
                                             title=" Days Restricted">
											@Html.LabelFor(model => model.T_DaysRestricted, new { @class="col-sm-5 col-md-5 col-xs-12" })
                                            <div class="input-group col-sm-7 col-md-7 col-xs-12">
												<input type="text" id="T_DaysRestrictedFrom" name="T_DaysRestrictedFrom" class="form-control"  placeholder="From"
												 data-val="true" data-val-number="Must be a number." />
                                            <span class="field-validation-valid" data-valmsg-for="T_DaysRestrictedFrom" data-valmsg-replace="true"></span>
											<span class="input-group-addon datefiled">
												<input type="text" id="T_DaysRestrictedTo" name="T_DaysRestrictedTo" class="form-control"  placeholder="To"	 data-val="true" data-val-number="Must be a number." style="border-radius:0px 4px 4px 0px; border-left:0px"/>
													<div class="field-validation-valid" style="margin-top: 25px;font-size: 12px;" data-valmsg-for="T_DaysRestrictedTo" data-valmsg-replace="true"></div>
											</span>
							</div>
                        </div>
                      </div>

			<div class='col-sm-4 col-md-4 col-xs-12'>
                                        <div class='form-group'
                                             title="Restriction Start Date">
											@Html.LabelFor(model => model.T_RestrictionStartDate, new { @class="col-sm-5 col-md-5 col-xs-12" })
                                            <div class="input-group col-sm-7 col-md-7 col-xs-12">
                                                <input type="text" id="T_RestrictionStartDateFrom" name="T_RestrictionStartDateFrom"  class="form-control"  placeholder="From Date"
											 data-val='true' data-val-date='Must be a date.' />
																						<span class="field-validation-valid" data-valmsg-for="T_RestrictionStartDateFrom" data-valmsg-replace="true"></span>	
												                                            
                                    <script type="text/javascript">
                                        $(function () {
                                            $('#T_RestrictionStartDateFrom').datetimepicker({ pickTime:false });
                                        });
                                    </script>
                                <span class="input-group-addon datefiled">
									<input type="text" id="T_RestrictionStartDateTo" name="T_RestrictionStartDateTo"  class="form-control"  placeholder="To Date"
												 data-val='true' data-val-date='Must be a date.'  style="border-radius:0px 4px 4px 0px; border-left:0px"/>
																							<div class="field-validation-valid" style="margin-top: 25px;font-size: 12px;" data-valmsg-for="T_RestrictionStartDateTo" data-valmsg-replace="true"></div>
												                                    <script type="text/javascript">
                                        $(function () {
                                            $('#T_RestrictionStartDateTo').datetimepicker({ pickTime:false });
                                        });
                                    </script>


								</span>
							</div>
                        </div>
                      </div>
			<div class='col-sm-4 col-md-4 col-xs-12'>
                                        <div class='form-group'
                                             title="Restriction End Date">
											@Html.LabelFor(model => model.T_RestrictionEndDate, new { @class="col-sm-5 col-md-5 col-xs-12" })
                                            <div class="input-group col-sm-7 col-md-7 col-xs-12">
                                                <input type="text" id="T_RestrictionEndDateFrom" name="T_RestrictionEndDateFrom"  class="form-control"  placeholder="From Date"
											 data-val='true' data-val-date='Must be a date.' />
																						<span class="field-validation-valid" data-valmsg-for="T_RestrictionEndDateFrom" data-valmsg-replace="true"></span>	
												                                            
                                    <script type="text/javascript">
                                        $(function () {
                                            $('#T_RestrictionEndDateFrom').datetimepicker({ pickTime:false });
                                        });
                                    </script>
                                <span class="input-group-addon datefiled">
									<input type="text" id="T_RestrictionEndDateTo" name="T_RestrictionEndDateTo"  class="form-control"  placeholder="To Date"
												 data-val='true' data-val-date='Must be a date.'  style="border-radius:0px 4px 4px 0px; border-left:0px"/>
																							<div class="field-validation-valid" style="margin-top: 25px;font-size: 12px;" data-valmsg-for="T_RestrictionEndDateTo" data-valmsg-replace="true"></div>
												                                    <script type="text/javascript">
                                        $(function () {
                                            $('#T_RestrictionEndDateTo').datetimepicker({ pickTime:false });
                                        });
                                    </script>


								</span>
							</div>
                        </div>
                      </div>
		  </div>
		  </div>
		</div>
	  </div>
	</div>
    <div class="row">
            <div class="col-md-12 col-sm-12 col-xs-12">
                <div class="panel panel-default">
                    <div class="panel-heading clearfix">
                        <i class="icon-calendar"></i>
                        <h3 class="panel-title">
                            <a data-toggle="collapse" data-parent="#accordion" href="#collapseBoolean"><i class="glyphicon glyphicon-chevron-down pull-left" style="padding-top:5px; padding-right:5px;"></i> Boolean Property</a>
                        </h3>
                    </div>
                    <div id="collapseBoolean" class="panel-collapse in">
                        <div class="panel-body">
                            <div class="row">
                                <div class='form-group'>
								               <div class="col-sm-4 col-md-4 col-xs-4">
                                        <label>OSHA</label>
                                        <select class="form-control" id="T_OSHA">
											<option value="">None</option>
                                            <option value="True">True</option>
                                            <option value="False">False</option>
                                        </select>
                                    </div>  
            								</div>
							</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
 	<div class="row">
                        <div class="col-md-12 col-sm-12 col-xs-12">
                            <div class="panel panel-default">
                                <div class="panel-heading clearfix">
                                    <i class="icon-calendar"></i>
                                    <h3 class="panel-title">
									             <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo"><i class="glyphicon glyphicon-chevron-down pull-left" style="padding-top:5px; padding-right:5px;"></i> Association Property</a>  
  
                                    </h3>
                                </div>
								<div id="collapseTwo" class="panel-collapse in">
                                <div class="panel-body">
       @if (User.CanView("T_Employee") && ViewBag.t_employeeemployeeinjury!=null)
                    {
 <div class='col-sm-6 col-md-6 col-xs-12'>
                            <div class='form-group' title="Employee">
							@Html.LabelFor(model => model.T_EmployeeEmployeeInjuryID, new { @class="col-sm-5 col-md-5 col-xs-12" })
                                <div class="input-group col-sm-7 col-md-7 col-xs-12" id="dvt_employeeemployeeinjury">
                                    		
	 @Html.DropDownList("t_employeeemployeeinjury", null, new {   @multiple = "multiple", @HostingName = "T_Employee", @dataurl = Url.Action("GetAllMultiSelectValue", "T_Employee",null) })
                                </div>
                            </div>
                        </div>
		}
@if (User.CanView("T_ClaimTypeMCI") && ViewBag.t_typeofclaimmci!=null)
                    {
 <div class='col-sm-6 col-md-6 col-xs-12'>
                            <div class='form-group' title="Type of Claim MCI">
							@Html.LabelFor(model => model.T_TypeofClaimMCIID, new { @class="col-sm-5 col-md-5 col-xs-12" })
                                <div class="input-group col-sm-7 col-md-7 col-xs-12" id="dvt_typeofclaimmci">
                                    		
	 @Html.DropDownList("t_typeofclaimmci", null, new {   @multiple = "multiple", @HostingName = "T_ClaimTypeMCI", @dataurl = Url.Action("GetAllMultiSelectValue", "T_ClaimTypeMCI",null) })
                                </div>
                            </div>
                        </div>
		}
@if (User.CanView("T_ShiftTime") && ViewBag.t_accidentshift!=null)
                    {
 <div class='col-sm-6 col-md-6 col-xs-12'>
                            <div class='form-group' title="Shift Working When Accident Occurred">
							@Html.LabelFor(model => model.T_AccidentShiftID, new { @class="col-sm-5 col-md-5 col-xs-12" })
                                <div class="input-group col-sm-7 col-md-7 col-xs-12" id="dvt_accidentshift">
                                    		
	 @Html.DropDownList("t_accidentshift", null, new {   @multiple = "multiple", @HostingName = "T_ShiftTime", @dataurl = Url.Action("GetAllMultiSelectValue", "T_ShiftTime",null) })
                                </div>
                            </div>
                        </div>
		}
@if (User.CanView("T_AllFacilities") && ViewBag.t_facilityaccidentoccured!=null)
                    {
 <div class='col-sm-6 col-md-6 col-xs-12'>
                            <div class='form-group' title="Facility Accident Occurred At">
							@Html.LabelFor(model => model.T_FacilityAccidentOccuredID, new { @class="col-sm-5 col-md-5 col-xs-12" })
                                <div class="input-group col-sm-7 col-md-7 col-xs-12" id="dvt_facilityaccidentoccured">
                                    		
	 @Html.DropDownList("t_facilityaccidentoccured", null, new {  @onchange = Html.Raw("ClearMultiSelectChild('t_unitwhereaccidentoccured');ClearMultiSelectChild('t_employeinjuryfloor');") ,  @multiple = "multiple", @HostingName = "T_AllFacilities", @dataurl = Url.Action("GetAllMultiSelectValue", "T_AllFacilities",null) })
                                </div>
                            </div>
                        </div>
		}
@if (User.CanView("T_AllFacilitiesUnit") && ViewBag.t_unitwhereaccidentoccured!=null)
                    {
 <div class='col-sm-6 col-md-6 col-xs-12'>
                            <div class='form-group' title="Unit Where Accident Occured">
							@Html.LabelFor(model => model.T_UnitWhereAccidentOccuredID, new { @class="col-sm-5 col-md-5 col-xs-12" })
                                <div class="input-group col-sm-7 col-md-7 col-xs-12" id="dvt_unitwhereaccidentoccured">
                                    		
	 @Html.DropDownList("t_unitwhereaccidentoccured", null, new {@ParentDD = "t_facilityaccidentoccured" , @AssoNameWithParent = "T_UnitsforAllFaciltiesID" ,  @onchange = Html.Raw("ClearMultiSelectChild('t_employeinjuryfloor');") ,  @multiple = "multiple", @HostingName = "T_AllFacilitiesUnit", @dataurl = Url.Action("GetAllMultiSelectValue", "T_AllFacilitiesUnit",null) })
                                </div>
                            </div>
                        </div>
		}
@if (User.CanView("T_AllFacilitiesFloor") && ViewBag.t_employeinjuryfloor!=null)
                    {
 <div class='col-sm-6 col-md-6 col-xs-12'>
                            <div class='form-group' title="Floor Accident Occurred on">
							@Html.LabelFor(model => model.T_EmployeInjuryFloorID, new { @class="col-sm-5 col-md-5 col-xs-12" })
                                <div class="input-group col-sm-7 col-md-7 col-xs-12" id="dvt_employeinjuryfloor">
                                    		
	 @Html.DropDownList("t_employeinjuryfloor", null, new {@ParentDD = "t_unitwhereaccidentoccured" , @AssoNameWithParent = "T_AllUnitsFloorID" ,   @multiple = "multiple", @HostingName = "T_AllFacilitiesFloor", @dataurl = Url.Action("GetAllMultiSelectValue", "T_AllFacilitiesFloor",null) })
                                </div>
                            </div>
                        </div>
		}
@if (User.CanView("T_WCAccident") && ViewBag.t_locationofaccident!=null)
                    {
 <div class='col-sm-6 col-md-6 col-xs-12'>
                            <div class='form-group' title="Location Of Accident">
							@Html.LabelFor(model => model.T_LocationOfAccidentID, new { @class="col-sm-5 col-md-5 col-xs-12" })
                                <div class="input-group col-sm-7 col-md-7 col-xs-12" id="dvt_locationofaccident">
                                    		
	 @Html.DropDownList("t_locationofaccident", null, new {   @multiple = "multiple", @HostingName = "T_WCAccident", @dataurl = Url.Action("GetAllMultiSelectValue", "T_WCAccident",null) })
                                </div>
                            </div>
                        </div>
		}
@if (User.CanView("T_InjuryCause") && ViewBag.t_employeeinjurycause!=null)
                    {
 <div class='col-sm-6 col-md-6 col-xs-12'>
                            <div class='form-group' title="Cause Of Injury ">
							@Html.LabelFor(model => model.T_EmployeeInjuryCauseID, new { @class="col-sm-5 col-md-5 col-xs-12" })
                                <div class="input-group col-sm-7 col-md-7 col-xs-12" id="dvt_employeeinjurycause">
                                    		
	 @Html.DropDownList("t_employeeinjurycause", null, new {   @multiple = "multiple", @HostingName = "T_InjuryCause", @dataurl = Url.Action("GetAllMultiSelectValue", "T_InjuryCause",null) })
                                </div>
                            </div>
                        </div>
		}
@if (User.CanView("T_InjuryNature") && ViewBag.t_employeeinjurynature!=null)
                    {
 <div class='col-sm-6 col-md-6 col-xs-12'>
                            <div class='form-group' title="Nature Of Injury Or Illness">
							@Html.LabelFor(model => model.T_EmployeeInjuryNatureID, new { @class="col-sm-5 col-md-5 col-xs-12" })
                                <div class="input-group col-sm-7 col-md-7 col-xs-12" id="dvt_employeeinjurynature">
                                    		
	 @Html.DropDownList("t_employeeinjurynature", null, new {   @multiple = "multiple", @HostingName = "T_InjuryNature", @dataurl = Url.Action("GetAllMultiSelectValue", "T_InjuryNature",null) })
                                </div>
                            </div>
                        </div>
		}
@if (User.CanView("T_BodyPartsAffected") && ViewBag.t_employeeinjurybodypartsaffected!=null)
                    {
 <div class='col-sm-6 col-md-6 col-xs-12'>
                            <div class='form-group' title="Parts Of Body Affected">
							@Html.LabelFor(model => model.T_EmployeeInjuryBodyPartsAffectedID, new { @class="col-sm-5 col-md-5 col-xs-12" })
                                <div class="input-group col-sm-7 col-md-7 col-xs-12" id="dvt_employeeinjurybodypartsaffected">
                                    		
	 @Html.DropDownList("t_employeeinjurybodypartsaffected", null, new {   @multiple = "multiple", @HostingName = "T_BodyPartsAffected", @dataurl = Url.Action("GetAllMultiSelectValue", "T_BodyPartsAffected",null) })
                                </div>
                            </div>
                        </div>
		}
@if (User.CanView("T_MachineTool") && ViewBag.t_employeeinjurymachinetool!=null)
                    {
 <div class='col-sm-6 col-md-6 col-xs-12'>
                            <div class='form-group' title="Machine, Tool Or Object Causing Illness Or Injury ">
							@Html.LabelFor(model => model.T_EMployeeInjuryMachineToolID, new { @class="col-sm-5 col-md-5 col-xs-12" })
                                <div class="input-group col-sm-7 col-md-7 col-xs-12" id="dvt_employeeinjurymachinetool">
                                    		
	 @Html.DropDownList("t_employeeinjurymachinetool", null, new {   @multiple = "multiple", @HostingName = "T_MachineTool", @dataurl = Url.Action("GetAllMultiSelectValue", "T_MachineTool",null) })
                                </div>
                            </div>
                        </div>
		}
@if (User.CanView("T_InitialTreatment") && ViewBag.t_initialtreatmentlist!=null)
                    {
 <div class='col-sm-6 col-md-6 col-xs-12'>
                            <div class='form-group' title="Initial Treatment List">
							@Html.LabelFor(model => model.T_InitialTreatmentListID, new { @class="col-sm-5 col-md-5 col-xs-12" })
                                <div class="input-group col-sm-7 col-md-7 col-xs-12" id="dvt_initialtreatmentlist">
                                    		
	 @Html.DropDownList("t_initialtreatmentlist", null, new {   @multiple = "multiple", @HostingName = "T_InitialTreatment", @dataurl = Url.Action("GetAllMultiSelectValue", "T_InitialTreatment",null) })
                                </div>
                            </div>
                        </div>
		}
@if (User.CanView("T_MedicalFacilityForTreatment") && ViewBag.t_employeeinjurymedicalfacilityfortreatment!=null)
                    {
 <div class='col-sm-6 col-md-6 col-xs-12'>
                            <div class='form-group' title="Medical Facility For Treatment">
							@Html.LabelFor(model => model.T_EmployeeInjuryMedicalFacilityForTreatmentID, new { @class="col-sm-5 col-md-5 col-xs-12" })
                                <div class="input-group col-sm-7 col-md-7 col-xs-12" id="dvt_employeeinjurymedicalfacilityfortreatment">
                                    		
	 @Html.DropDownList("t_employeeinjurymedicalfacilityfortreatment", null, new {   @multiple = "multiple", @HostingName = "T_MedicalFacilityForTreatment", @dataurl = Url.Action("GetAllMultiSelectValue", "T_MedicalFacilityForTreatment",null) })
                                </div>
                            </div>
                        </div>
		}
@if (User.CanView("T_Refusal") && ViewBag.t_employeeinjuryrefusal!=null)
                    {
 <div class='col-sm-6 col-md-6 col-xs-12'>
                            <div class='form-group' title="Restriction Refusal Reason">
							@Html.LabelFor(model => model.T_EmployeeInjuryRefusalID, new { @class="col-sm-5 col-md-5 col-xs-12" })
                                <div class="input-group col-sm-7 col-md-7 col-xs-12" id="dvt_employeeinjuryrefusal">
                                    		
	 @Html.DropDownList("t_employeeinjuryrefusal", null, new {   @multiple = "multiple", @HostingName = "T_Refusal", @dataurl = Url.Action("GetAllMultiSelectValue", "T_Refusal",null) })
                                </div>
                            </div>
                        </div>
		}
	@if (User.CanView("T_ClaimType") && ViewBag.t_typeofclaim!=null)
    {
			<div class='col-sm-6 col-md-6 col-xs-12'>
                            <div class='form-group' title="t_typeofclaim">
                                <label class="col-sm-5 col-md-5 col-xs-12"> Type of Claim Facility</label>
                                <div class="input-group col-sm-7 col-md-7 col-xs-12" id="dvt_employeeinjury">
                                   		
	 @Html.DropDownList("t_typeofclaim", null, new {   @multiple = "multiple", @HostingName = "T_ClaimType", @dataurl = Url.Action("GetAllMultiSelectValue", "T_ClaimType",null) })

								
                                </div>
                            </div>
                        </div>
		}
	@if (User.CanView("T_Restrictions") && ViewBag.t_typeofrestrictions!=null)
    {
			<div class='col-sm-6 col-md-6 col-xs-12'>
                            <div class='form-group' title="t_typeofrestrictions">
                                <label class="col-sm-5 col-md-5 col-xs-12"> Type Of Restrictions</label>
                                <div class="input-group col-sm-7 col-md-7 col-xs-12" id="dvt_employeeinjury">
                                   		
	 @Html.DropDownList("t_typeofrestrictions", null, new {   @multiple = "multiple", @HostingName = "T_Restrictions", @dataurl = Url.Action("GetAllMultiSelectValue", "T_Restrictions",null) })

								
                                </div>
                            </div>
                        </div>
		}

		</div>
		</div>
		</div>
		</div>
	</div>
		 <div class="row">
                        <div class="col-md-6 col-sm-6 col-xs-6">
                            <div class="panel panel-default">
                                <div class="panel-heading clearfix">
                                    <i class="icon-calendar"></i>
                                    <h3 class="panel-title">
                                          <a data-toggle="collapse" data-parent="#accordion" href="#collapsesorting"><i class="glyphicon glyphicon-chevron-down pull-left" style="padding-top:5px; padding-right:5px;"></i> Select Columns for sorting</a>
                 
                                    </h3>
                                </div>
								<div id="collapsesorting" class="panel-collapse in">
                                <div class="panel-body">
                                    <div class='col-sm-6 col-md-6 col-xs-12'>
                                        <div class='form-group'>
                                            <label id="lblOrderDepth" class="col-sm-5 col-md-5 col-xs-12">Order By</label>
                                            <div class="input-group col-sm-7 col-md-7 col-xs-12">
                                                <div class="input-group" style="width:100%;">
                                                    @Html.DropDownList("SortOrder1", null, "-- Select --", new { @class = "form-control" })
                                                </div>
                                            </div>
                                        </div>
                                        
                                    </div>
                                    <button class="btn btn-primary btn-sm" onclick="SetSortOrder();" type="button" value="Add">Add</button>
                                   
                                    <div class="clearfix"></div>
                                    <label id="lblsortorder" style=""></label>
                                    <button class="btn btn-default btn-xs" type="button" id="btnsortorder" style="display:none !important;" onclick="clearsortorder();">Reset</button>
                                   @Html.Hidden("SortOrder")
								   </div>
                                </div>
                            </div>
							</div>
							<div class="col-md-6 col-sm-6 col-xs-6">
							<div class="panel panel-default">
                                <div class="panel-heading clearfix">
                                    <i class="icon-calendar"></i>
                                    <h3 class="panel-title">
                                       <a data-toggle="collapse" data-parent="#accordion" href="#collapsegrouping"><i class="glyphicon glyphicon-chevron-down pull-left" style="padding-top:5px; padding-right:5px;"></i> Select Columns for grouping</a>
                                    </h3>
                                </div>
								<div id="collapsegrouping" class="panel-collapse in">
                                <div class="panel-body">
                                    <div class='col-sm-6 col-md-6 col-xs-12'>
                                        <div class='form-group'>
                                            <label id="lblGroupDepth" class="col-sm-5 col-md-5 col-xs-12">Group By</label>
                                            <div class="input-group col-sm-7 col-md-7 col-xs-12">
                                                <div class="input-group" style="width:100%;">
                                                    @Html.DropDownList("GroupByColumn", null, "-- Select --", new { @class = "form-control" })
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                    <button class="btn btn-primary btn-sm" onclick="SetGroupByColumn();" type="button" value="Add">Add</button>

                                    <div class="clearfix"></div>
                                    <label id="lblgroupbycolumn" style=""></label>
                                    <button class="btn btn-default btn-xs" type="button" id="btngroupbycolumn" style="display:none !important;" onclick="cleargroupbycolumn();">Reset</button>
                                    @Html.Hidden("hdnGroupByColumn")
                                </div>
								</div>
                            </div>
							</div>
							<div class="col-md-12 col-sm-12 col-xs-12">
							 <div class="panel panel-default">
                                <div class="panel-heading clearfix">
                                    <i class="icon-calendar"></i>
                                    <h3 class="panel-title">
                                       <a data-toggle="collapse" data-parent="#accordion" href="#collapseGridLayout"><i class="glyphicon glyphicon-chevron-down pull-left" style="padding-top:5px; padding-right:5px;"></i> Grid Layout & Hide Columns</a>
                                    </h3>
                                </div>
								<div id="collapseGridLayout" class="panel-collapse in">
                                <div class="panel-body">
									<div class='col-sm-6 col-md-6 col-xs-12'>
                                        <div class='form-group'>
                                            <label class="col-sm-5 col-md-5 col-xs-12">Grid Layout</label>
                                            <div class="input-group col-sm-7 col-md-7 col-xs-12">
                                                <div class="input-group" style="width:100%;">
                                                    <select class="form-control" id="DisplayLayout">
                                                        <option value="IndexPartial">Table (Default)</option>
                                                        <option value="IndexPartialGallery">Gallery</option>
                                                        <option value="IndexPartialList">List</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class='col-sm-6 col-md-6 col-xs-12'>
                                        <div class='form-group'>
                                            <label class="col-sm-5 col-md-5 col-xs-12">Hide Columns</label>
                                            <div class="input-group col-sm-7 col-md-7 col-xs-12">
                                                <div class="input-group" style="width:100%;">
                                                    @Html.DropDownList("HideColumns", null, new {@multiple = "multiple" })
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </div>
								</div>
                            </div>
                        </div>
                    </div>
					<div class="row">
                        <div class="col-md-12 col-sm-12 col-xs-12">
                            <div class="panel panel-default">
                                <div class="panel-heading clearfix">
                                   <h3 class="panel-title">
                            <a data-toggle="collapse" data-parent="#accordion" href="#collapseSearchCriteria"><i class="glyphicon glyphicon-chevron-down pull-left" style="padding-top:5px; padding-right:5px;"></i> Specific Field Search Criteria</a>
                        </h3>
                                </div>
								<div id="collapseSearchCriteria" class="panel-collapse in">
                                <div class="panel-body">
                                    <div class="row">
                                        <div class="col-sm-3 col-md-3 col-xs-12">
                                            <div class='form-group'>
                                                <label>Select Property <span class="text-danger-reg">*</span></label>
                                                @Html.DropDownList("PropertyList", null, "-- Select Property --", new { @onchange = "FillCriteriaValue(this);GetSecondLevelAttributeForCriteria();", @class = "form-control" })
                                                @Html.DropDownList("AssociationPropertyList", null, "-- Select --", new { @onchange = "GetCriteriaSuggestedValues(this);FillCriteriaForAssociation();", @class = "form-control", @style = "margin-top:8px;display:none;", @HostingName = "", @dataurl = "" })
                                            </div>
                                        </div>
                                        <div class="col-sm-3 col-md-3 col-xs-12">
                                            <div class='form-group'>
                                                <label>Select Operator <span class="text-danger-reg">*</span></label>
                                                <select class="form-control" id="OperatorList" onchange="SetCriteriaValueType(this);">
                                                    <option value="">-- Select --</option>
                                                </select>
                                                @Html.TextBox("ConditionOperator", null, new { @class = "form-control hidden" })
                                            </div>
                                        </div>
                                        <div class="col-sm-3 col-md-3 col-xs-12">
                                            <div class='form-group'>
                                                <label>Select Value Type<span class="text-danger-reg">*</span></label>
                                                <select class="form-control" id="ValueTypeList" onchange="GetCriteriaSuggestedValues(this);">
                                                    <option value="Constant">Constant</option>
                                                    <option value="Pick From List">Pick From List</option>
                                                    <option value="Dynamic">Dynamic</option>
                                                </select>
                                                @Html.TextBox("ConditionValueType", null, new { @class = "form-control hidden" })
                                            </div>
                                        </div>
                                        <div class="col-sm-3 col-md-3 col-xs-12">
                                            <label>Property Value<span class="text-danger-reg">*</span></label>
                                            <div class='form-group'>
                                                @Html.TextBox("ConditionValue", null, new { @class = "col-sm-8 col-md-8 col-xs-8", @style = "border-radius:4px;" })
                                                <div style="display:none; padding-left:0px;" id="dvSuggestedPropertyValue" class="col-sm-8 col-md-8 col-xs-8">
                                                    @Html.DropDownList("SuggestedPropertyValue", null, new { @multiple = "multiple" })
                                                    @Html.TextBox("SuggestedPropertyValues", null, new { @class = "form-control hidden" })
                                                </div>
                                                <div id="dvRule7DynamicValueInCondition" class="col-sm-8 col-md-8 col-xs-8" style="display:none; padding:0px;">
                                                    @Html.DropDownList("SuggestedDynamicValueInCondition7", null, "-- Select --", new { @onchange = "GetSecondLevelAttributeInCriteria();", @class = "form-control", @style = "margin:0px;", @HostingName = "", @dataurl = "" })
                                                    @Html.DropDownList("SuggestedDynamicValueInCondition71", null, "-- Select --", new { @class = "form-control", @style = "margin-top:8px;", @HostingName = "", @dataurl = "" })
                                                </div>
                                                <div class="col-sm-4 col-md-4 col-xs-4" style="padding:0px 0px 0px 5px;">
                                                    <select class="form-control" id="LogicalConnectorList">
                                                        <option value="AND">AND</option>
                                                        <option value="OR">OR</option>
                                                    </select>
                                                    @Html.TextBox("LogicalConnector", null, new { @class = "form-control hidden" })
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-12 col-md-12 col-lg-12" style="margin-top:10px; padding:0px">
                                        <button type="button" id="btnAddAction4" onclick="AddCriteriaInGrid()" class="btn btn-primary pull-right">Add Condition</button>
                                    </div>
                                </div>
                                <div id="Des_Table" style="padding-top:5px;" class="table-responsive" style="overflow-x:auto;">
                                    <table id="tblConditionList" style="display:none;" class="table table-striped table-bordered table-hover table-condensed">
                                        <thead>
                                            <tr>
                                                <th class="col1">Property</th>
                                                <th class="col1">Operator</th>
                                                <th class="col1">Value</th>
                                                <th class="col1">Connector</th>
                                                <th class="col1">Remove</th>
                                            </tr>
                                        </thead>
                                        <tr></tr>
                                    </table>
                                </div>
                                @Html.TextBox("FilterCondition", null, new { @class = "hidden" })
                            </div>
                        </div>
						</div>
                    </div>
			@*End Div*@
			</div>
</div>
					
<a href="@Url.Action("Index")" class="btn btn-default btn-sm"> Cancel</a>
<button id="clearfSearchT_EmployeeInjury" type="button" class="btn btn-primary btn-sm" onclick="@Html.Raw("clearFsearch('" + Url.Action("SetFSearch", "T_EmployeeInjury") + "',event)")">Clear</button>
<button id="fSearchT_EmployeeInjury" class="btn btn-primary btn-sm" type="submit" dataurl="@(Url.Action("FSearch", "T_EmployeeInjury", null) )"
        onclick="@(Html.Raw("FacetedSearch(event,'T_EmployeeInjury','t_employeeemployeeinjury,t_typeofclaimmci,t_accidentshift,t_facilityaccidentoccured,t_unitwhereaccidentoccured,t_employeinjuryfloor,t_locationofaccident,t_employeeinjurycause,t_employeeinjurynature,t_employeeinjurybodypartsaffected,t_employeeinjurymachinetool,t_initialtreatmentlist,t_employeeinjurymedicalfacilityfortreatment,t_employeeinjuryrefusal,t_typeofclaim,t_typeofrestrictions','T_OSHA,T_AccidentDateFrom,T_AccidentDateTo,T_DaysOffFrom,T_DaysOffTo,T_DaysRestrictedFrom,T_DaysRestrictedTo,T_RestrictionStartDateFrom,T_RestrictionStartDateTo,T_RestrictionEndDateFrom,T_RestrictionEndDateTo','T_AccidentDateFromhdn,T_AccidentDateTohdn','"
   + Convert.ToString(Request.QueryString["viewtype"]) + "','" + Convert.ToString(Request.QueryString["sortBy"]) + "','"
     + Convert.ToString(Request.QueryString["isAsc"]) + "','" + "'); "))">
    Search
</button>
}


<script>
 function clearFsearch(url, e) {
        e.preventDefault();
        var urlstring = url + "?IsClear=true";
        window.location.replace(urlstring)
        return false;
    }	
	function closealert() {
        $('#dvalert').attr("class", "modal fade");
        $('#dvalert').attr("aria-hidden", "true");
        $('#dvalert').attr("style", "display:none;");
    }
	function cleargroupbycolumn() {
        $("#hdnGroupByColumn").val('');
        $("#lblgroupbycolumn").html('');
        $("#lblgroupbycolumn").removeAttr("style");
        $("#btngroupbycolumn").attr("style", "display:none !important;");
        $("#lblGroupDepth").html('Group By');
    }
    function SetGroupByColumn() {
        var value = $("#hdnGroupByColumn").val();
        value += $("#GroupByColumn").val() + ",";
        $("#hdnGroupByColumn").val(value);
        var text = $("#GroupByColumn option:selected").map(function () {
            return $(this).text();
        }).get().join();
        if (text == "-- Select --") {
            $('#dvalert').attr("class", "modal fade in");
            $('#dvalert').attr("aria-hidden", "false");
            $('#dvalert').attr("style", "display:block;");
            $('#alertbody').html("Please select at least one property for grouping.");
            return;
        }
        if ($("#lblgroupbycolumn").html().length > 0) {
            var arrgrouping = $("#lblgroupbycolumn").html().split(' Then Group By ');
            //var test1 = arrsortorder.indexOf(text + "-&gt");
            if ($.inArray(text, arrgrouping) >= 0) {
                $('#dvalert').attr("class", "modal fade in");
                $('#dvalert').attr("aria-hidden", "false");
                $('#dvalert').attr("style", "display:block;");
                $('#alertbody').html("This property is already selected, please select any other property.");
                return;
            }
            $("#lblgroupbycolumn").append(" Then Group By " + text);
        }
        else
            $("#lblgroupbycolumn").append(text);
        $("#btngroupbycolumn").show();
        $("#lblGroupDepth").html('Then Group By');
        $("#lblgroupbycolumn").attr("style", "border:1px solid #428bca;margin-left: 15px; background: #edf5fa; padding-left: 5px !important; border-radius: 4px;")
    }

    function clearsortorder()
    {
        $("#SortOrder").val('');
        $("#lblsortorder").html('');
        $("#lblsortorder").removeAttr("style");
        $("#btnsortorder").attr("style", "display:none !important;");
        $("#lblOrderDepth").html('Order By');
        
    }
    function SetSortOrder() {
        var value = $("#SortOrder").val();
        value += $("#SortOrder1").val() + ",";
        $("#SortOrder").val(value);
        var text = $("#SortOrder1 option:selected").map(function () {
            return $(this).text();
        }).get().join();
        if (text == "-- Select --")
        {
            $('#dvalert').attr("class", "modal fade in");
            $('#dvalert').attr("aria-hidden", "false");
            $('#dvalert').attr("style", "display:block;");
            $('#alertbody').html("Please select at least one property for sorting.");
            return;
        }
        if ($("#lblsortorder").html().length > 0) {
            var arrsortorder = $("#lblsortorder").html().split(';');
            //var test1 = arrsortorder.indexOf(text + "-&gt");
            if ($.inArray(text + "-&gt", arrsortorder) >= 0 || $.inArray(text, arrsortorder) >= 0) {
                 $('#dvalert').attr("class", "modal fade in");
                $('#dvalert').attr("aria-hidden", "false");
                $('#dvalert').attr("style", "display:block;");
                $('#alertbody').html("This property is already selected, please select any other property.");
                return;
            }
            $("#lblsortorder").append("->" + text);
        }
        else
            $("#lblsortorder").append(text);
        $("#btnsortorder").show();
        $("#lblOrderDepth").html('Then Order By');
        $("#lblsortorder").attr("style", "border:1px solid #428bca;margin-left: 15px; background: #edf5fa; padding-left: 5px !important; border-radius: 4px;")
    }
    $(document).ready(function () {
	 $('#HideColumns').multiselect({
            buttonWidth: '100%'
        });
	 $('#t_employeeemployeeinjury').multiselect({
            buttonWidth: '100%',
			nonSelectedText: 'ALL',
        });
	 $('#t_typeofclaimmci').multiselect({
            buttonWidth: '100%',
			nonSelectedText: 'ALL',
        });
	 $('#t_accidentshift').multiselect({
            buttonWidth: '100%',
			nonSelectedText: 'ALL',
        });
	 $('#t_facilityaccidentoccured').multiselect({
            buttonWidth: '100%',
			nonSelectedText: 'ALL',
        });
	 $('#t_unitwhereaccidentoccured').multiselect({
            buttonWidth: '100%',
			nonSelectedText: 'ALL',
        });
	 $('#t_employeinjuryfloor').multiselect({
            buttonWidth: '100%',
			nonSelectedText: 'ALL',
        });
	 $('#t_locationofaccident').multiselect({
            buttonWidth: '100%',
			nonSelectedText: 'ALL',
        });
	 $('#t_employeeinjurycause').multiselect({
            buttonWidth: '100%',
			nonSelectedText: 'ALL',
        });
	 $('#t_employeeinjurynature').multiselect({
            buttonWidth: '100%',
			nonSelectedText: 'ALL',
        });
	 $('#t_employeeinjurybodypartsaffected').multiselect({
            buttonWidth: '100%',
			nonSelectedText: 'ALL',
        });
	 $('#t_employeeinjurymachinetool').multiselect({
            buttonWidth: '100%',
			nonSelectedText: 'ALL',
        });
	 $('#t_initialtreatmentlist').multiselect({
            buttonWidth: '100%',
			nonSelectedText: 'ALL',
        });
	 $('#t_employeeinjurymedicalfacilityfortreatment').multiselect({
            buttonWidth: '100%',
			nonSelectedText: 'ALL',
        });
	 $('#t_employeeinjuryrefusal').multiselect({
            buttonWidth: '100%',
			nonSelectedText: 'ALL',
        });
 $('#t_typeofclaim').multiselect({
            buttonWidth: '100%',
			nonSelectedText: 'ALL',
        });
 $('#t_typeofrestrictions').multiselect({
            buttonWidth: '100%',
			nonSelectedText: 'ALL',
        });
    });
</script>
<script>
    function keypressHandler(e) {
        if (e.which == 13) {
            $(this).blur();
            $('#fSearchT_EmployeeInjury').focus().click();
        }
    }
 $(document).keypress(keypressHandler);
 $(document).ready(function () {
  if ("@parentUrl".length > 0) {
		  if ("@parentUrl["SortOrder"]" != null && "@parentUrl["SortOrder"]".length > 0) {
                var value = '@parentUrl["SortOrder"]';
                var indexlist = value.split(',')
                $("#SortOrder").val('');
                for (var i = 0; i < indexlist.length; i++) {
                    if (indexlist[i].length > 0) {
                        $("#SortOrder1").val(indexlist[i]);
                        SetSortOrder();
                    }
                }
                $("#SortOrder").val(value);
                $("#btnsortorder").show();
                $("#lblOrderDepth").html('Then Order By');
                $("#lblsortorder").attr("style", "border:1px solid #428bca;margin-left: 15px; background: #edf5fa; padding-left: 5px !important; border-radius: 4px;")
            }

			if ("@parentUrl["GroupByColumn"]" != null && "@parentUrl["GroupByColumn"]".length > 0) {
                var value = '@parentUrl["GroupByColumn"]';
                var indexlist = value.split(',')
                $("#hdnGroupByColumn").val('');
                for (var i = 0; i < indexlist.length; i++) {
                    if (indexlist[i].length > 0) {
                        $("#GroupByColumn").val(indexlist[i]);
                        SetGroupByColumn();
                    }
                }
                $("#hdnGroupByColumn").val(value);
                $("#btngroupbycolumn").show();
                $("#lblGroupDepth").html('Then Group By');
                $("#lblgroupbycolumn").attr("style", "border:1px solid #428bca;margin-left: 15px; background: #edf5fa; padding-left: 5px !important; border-radius: 4px;")
            }

            if ("@parentUrl["HideColumns"]" != null && "@parentUrl["HideColumns"]".length > 0) {
                var resHideColumns = "@parentUrl["HideColumns"]".split(",");
                var eleHideColumns = document.getElementById("HideColumns");
                for (i = 0; i < resHideColumns.length; i++) {
                    for (var o = 0; o < eleHideColumns.options.length; o++) {
                        if (eleHideColumns.options[o].value == resHideColumns[i])
                            eleHideColumns.options[o].selected = true;
                    }
                }
                $("#HideColumns").multiselect("rebuild");
            }
			if ("@parentUrl["viewtype"]" != null && "@parentUrl["viewtype"]".length > 0) {
                $("#DisplayLayout").val('@parentUrl["viewtype"]');
            }

			if ("@parentUrl["FilterCondition"]" != null && "@parentUrl["FilterCondition"]".length > 0) {
                var value = "@parentUrl["FilterCondition"]".split("?");
                for (i = 0; i < value.length - 1; i++) {
                    if (value != "" && value != "undefined") {
                        var str = "<tr>";
                        var param = value[i].toString().split(",");
                        var val1Text = "";
                        if (param[0].indexOf("[") > -1) {
                            var assocNm = param[0].substring(1, param[0].lastIndexOf("."));
                            var assocPrp = param[0].substring(param[0].lastIndexOf(".") + 1, param[0].length - 1);
                            var assocEnt = $("#PropertyList option[value='" + assocNm + "']").text();
                            var assocEntPrp = "";
                            if (assocPrp != "") {
                                $.ajax({
                                    url: '@Url.Action("GetPropertyDP", "Customer")' + '?entityName=' + assocEnt + '&propertyName=' + assocPrp,
                                    type: "GET",
                                    cache: false,
                                    async: false,
                                    success: function (result) {
                                        if (result != "") {
                                            assocEntPrp = result;
                                        }
                                    },
                                    error: function (jqXHR, textStatus, errorThrown) {

                                    }
                                });
                            }
                            val1Text = param[0].replace(assocNm, assocEnt).replace(assocPrp, assocEntPrp);
                        }
                        else { val1Text = $("#PropertyList option[value='" + param[0] + "']").text(); }

                        var val1 = param[0];
                        var val2 = checkOperator(param[1]);
                        var val3 = param[2];
                        var val4 = param[3];

                        var funcval = val1 + "," + val2 + "," + val3 + "," + val4 + "?";
                        var val = $("#FilterCondition").val();
                        val += val1 + "," + val2 + "," + val3 + "," + val4 + "?";

                        str += "<td>" + val1Text + "</td>";
                        str += "<td>" + val2 + "</td>";
                        str += "<td>" + val3 + "</td>";
                        str += "<td>" + val4 + "</td>";
                        str += "<td><i name=\"FilterCondition\" onclick=\"deleteRowCriteria(this,'" + funcval + "');\" class=\"fam-delete\"></i></td>";

                        $("#FilterCondition").val(val);
                        $('#tblConditionList').show();
                        $('#tblConditionList').append(str);
                    }
                }
            }


			 document.getElementById("FSearch").value = AntiSanitizeURLString("@parentUrl["search"]");
document.getElementById("T_OSHA").value = "@parentUrl["T_OSHA"]";
	    

			"@parentUrl["T_AccidentDateTo"]" == "" ? document.getElementById("T_AccidentDateTo").value = "" : LoadDateTimeByFormat("MM/DD/YYYY hh:mm", "@String.Format("{0:MM/dd/yyyy HH:mm}", Convert.ToDateTime(parentUrl["T_AccidentDateTo"]))", $("#T_AccidentDateTo"))
            "@parentUrl["T_AccidentDateFrom"]" == "" ? document.getElementById("T_AccidentDateFrom").value = "" : LoadDateTimeByFormat("MM/DD/YYYY hh:mm", "@String.Format("{0:MM/dd/yyyy HH:mm}", Convert.ToDateTime(parentUrl["T_AccidentDateFrom"]))", $("#T_AccidentDateFrom"))
						 document.getElementById("T_DaysOffTo").value = "@parentUrl["T_DaysOffTo"]";
			 document.getElementById("T_DaysOffFrom").value = "@parentUrl["T_DaysOffFrom"]";
						 document.getElementById("T_DaysRestrictedTo").value = "@parentUrl["T_DaysRestrictedTo"]";
			 document.getElementById("T_DaysRestrictedFrom").value = "@parentUrl["T_DaysRestrictedFrom"]";
						 document.getElementById("T_RestrictionStartDateTo").value = "@parentUrl["T_RestrictionStartDateTo"]";
			 document.getElementById("T_RestrictionStartDateFrom").value = "@parentUrl["T_RestrictionStartDateFrom"]";
						 document.getElementById("T_RestrictionEndDateTo").value = "@parentUrl["T_RestrictionEndDateTo"]";
			 document.getElementById("T_RestrictionEndDateFrom").value = "@parentUrl["T_RestrictionEndDateFrom"]";
			 if ("@parentUrl["t_employeeemployeeinjury"]" != null && "@parentUrl["t_employeeemployeeinjury"]".length > 0) {
            var resT_EmployeeEmployeeInjury = "@parentUrl["t_employeeemployeeinjury"]".split(",");
            var eleT_EmployeeEmployeeInjury = document.getElementById("t_employeeemployeeinjury");
			FillMultiSelectDropDown(resT_EmployeeEmployeeInjury , eleT_EmployeeEmployeeInjury, "t_employeeemployeeinjury");
	}
	else {
            var resT_EmployeeEmployeeInjury = "@parentUrl["t_employeeemployeeinjury"]".split(",");
            var eleT_EmployeeEmployeeInjury = document.getElementById("t_employeeemployeeinjury");
			FillMultiSelectDropDown(resT_EmployeeEmployeeInjury , eleT_EmployeeEmployeeInjury, "t_employeeemployeeinjury");
         }
 if ("@parentUrl["t_typeofclaimmci"]" != null && "@parentUrl["t_typeofclaimmci"]".length > 0) {
            var resT_TypeofClaimMCI = "@parentUrl["t_typeofclaimmci"]".split(",");
            var eleT_TypeofClaimMCI = document.getElementById("t_typeofclaimmci");
			FillMultiSelectDropDown(resT_TypeofClaimMCI , eleT_TypeofClaimMCI, "t_typeofclaimmci");
	}
	else {
            var resT_TypeofClaimMCI = "@parentUrl["t_typeofclaimmci"]".split(",");
            var eleT_TypeofClaimMCI = document.getElementById("t_typeofclaimmci");
			FillMultiSelectDropDown(resT_TypeofClaimMCI , eleT_TypeofClaimMCI, "t_typeofclaimmci");
         }
 if ("@parentUrl["t_accidentshift"]" != null && "@parentUrl["t_accidentshift"]".length > 0) {
            var resT_AccidentShift = "@parentUrl["t_accidentshift"]".split(",");
            var eleT_AccidentShift = document.getElementById("t_accidentshift");
			FillMultiSelectDropDown(resT_AccidentShift , eleT_AccidentShift, "t_accidentshift");
	}
	else {
            var resT_AccidentShift = "@parentUrl["t_accidentshift"]".split(",");
            var eleT_AccidentShift = document.getElementById("t_accidentshift");
			FillMultiSelectDropDown(resT_AccidentShift , eleT_AccidentShift, "t_accidentshift");
         }
 if ("@parentUrl["t_facilityaccidentoccured"]" != null && "@parentUrl["t_facilityaccidentoccured"]".length > 0) {
            var resT_FacilityAccidentOccured = "@parentUrl["t_facilityaccidentoccured"]".split(",");
            var eleT_FacilityAccidentOccured = document.getElementById("t_facilityaccidentoccured");
			FillMultiSelectDropDown(resT_FacilityAccidentOccured , eleT_FacilityAccidentOccured, "t_facilityaccidentoccured");
	}
	else {
            var resT_FacilityAccidentOccured = "@parentUrl["t_facilityaccidentoccured"]".split(",");
            var eleT_FacilityAccidentOccured = document.getElementById("t_facilityaccidentoccured");
			FillMultiSelectDropDown(resT_FacilityAccidentOccured , eleT_FacilityAccidentOccured, "t_facilityaccidentoccured");
         }
 if ("@parentUrl["t_unitwhereaccidentoccured"]" != null && "@parentUrl["t_unitwhereaccidentoccured"]".length > 0) {
            var resT_UnitWhereAccidentOccured = "@parentUrl["t_unitwhereaccidentoccured"]".split(",");
            var eleT_UnitWhereAccidentOccured = document.getElementById("t_unitwhereaccidentoccured");
			FillMultiSelectDropDown(resT_UnitWhereAccidentOccured , eleT_UnitWhereAccidentOccured, "t_unitwhereaccidentoccured");
	}
	else {
            var resT_UnitWhereAccidentOccured = "@parentUrl["t_unitwhereaccidentoccured"]".split(",");
            var eleT_UnitWhereAccidentOccured = document.getElementById("t_unitwhereaccidentoccured");
			FillMultiSelectDropDown(resT_UnitWhereAccidentOccured , eleT_UnitWhereAccidentOccured, "t_unitwhereaccidentoccured");
         }
 if ("@parentUrl["t_employeinjuryfloor"]" != null && "@parentUrl["t_employeinjuryfloor"]".length > 0) {
            var resT_EmployeInjuryFloor = "@parentUrl["t_employeinjuryfloor"]".split(",");
            var eleT_EmployeInjuryFloor = document.getElementById("t_employeinjuryfloor");
			FillMultiSelectDropDown(resT_EmployeInjuryFloor , eleT_EmployeInjuryFloor, "t_employeinjuryfloor");
	}
	else {
            var resT_EmployeInjuryFloor = "@parentUrl["t_employeinjuryfloor"]".split(",");
            var eleT_EmployeInjuryFloor = document.getElementById("t_employeinjuryfloor");
			FillMultiSelectDropDown(resT_EmployeInjuryFloor , eleT_EmployeInjuryFloor, "t_employeinjuryfloor");
         }
 if ("@parentUrl["t_locationofaccident"]" != null && "@parentUrl["t_locationofaccident"]".length > 0) {
            var resT_LocationOfAccident = "@parentUrl["t_locationofaccident"]".split(",");
            var eleT_LocationOfAccident = document.getElementById("t_locationofaccident");
			FillMultiSelectDropDown(resT_LocationOfAccident , eleT_LocationOfAccident, "t_locationofaccident");
	}
	else {
            var resT_LocationOfAccident = "@parentUrl["t_locationofaccident"]".split(",");
            var eleT_LocationOfAccident = document.getElementById("t_locationofaccident");
			FillMultiSelectDropDown(resT_LocationOfAccident , eleT_LocationOfAccident, "t_locationofaccident");
         }
 if ("@parentUrl["t_employeeinjurycause"]" != null && "@parentUrl["t_employeeinjurycause"]".length > 0) {
            var resT_EmployeeInjuryCause = "@parentUrl["t_employeeinjurycause"]".split(",");
            var eleT_EmployeeInjuryCause = document.getElementById("t_employeeinjurycause");
			FillMultiSelectDropDown(resT_EmployeeInjuryCause , eleT_EmployeeInjuryCause, "t_employeeinjurycause");
	}
	else {
            var resT_EmployeeInjuryCause = "@parentUrl["t_employeeinjurycause"]".split(",");
            var eleT_EmployeeInjuryCause = document.getElementById("t_employeeinjurycause");
			FillMultiSelectDropDown(resT_EmployeeInjuryCause , eleT_EmployeeInjuryCause, "t_employeeinjurycause");
         }
 if ("@parentUrl["t_employeeinjurynature"]" != null && "@parentUrl["t_employeeinjurynature"]".length > 0) {
            var resT_EmployeeInjuryNature = "@parentUrl["t_employeeinjurynature"]".split(",");
            var eleT_EmployeeInjuryNature = document.getElementById("t_employeeinjurynature");
			FillMultiSelectDropDown(resT_EmployeeInjuryNature , eleT_EmployeeInjuryNature, "t_employeeinjurynature");
	}
	else {
            var resT_EmployeeInjuryNature = "@parentUrl["t_employeeinjurynature"]".split(",");
            var eleT_EmployeeInjuryNature = document.getElementById("t_employeeinjurynature");
			FillMultiSelectDropDown(resT_EmployeeInjuryNature , eleT_EmployeeInjuryNature, "t_employeeinjurynature");
         }
 if ("@parentUrl["t_employeeinjurybodypartsaffected"]" != null && "@parentUrl["t_employeeinjurybodypartsaffected"]".length > 0) {
            var resT_EmployeeInjuryBodyPartsAffected = "@parentUrl["t_employeeinjurybodypartsaffected"]".split(",");
            var eleT_EmployeeInjuryBodyPartsAffected = document.getElementById("t_employeeinjurybodypartsaffected");
			FillMultiSelectDropDown(resT_EmployeeInjuryBodyPartsAffected , eleT_EmployeeInjuryBodyPartsAffected, "t_employeeinjurybodypartsaffected");
	}
	else {
            var resT_EmployeeInjuryBodyPartsAffected = "@parentUrl["t_employeeinjurybodypartsaffected"]".split(",");
            var eleT_EmployeeInjuryBodyPartsAffected = document.getElementById("t_employeeinjurybodypartsaffected");
			FillMultiSelectDropDown(resT_EmployeeInjuryBodyPartsAffected , eleT_EmployeeInjuryBodyPartsAffected, "t_employeeinjurybodypartsaffected");
         }
 if ("@parentUrl["t_employeeinjurymachinetool"]" != null && "@parentUrl["t_employeeinjurymachinetool"]".length > 0) {
            var resT_EMployeeInjuryMachineTool = "@parentUrl["t_employeeinjurymachinetool"]".split(",");
            var eleT_EMployeeInjuryMachineTool = document.getElementById("t_employeeinjurymachinetool");
			FillMultiSelectDropDown(resT_EMployeeInjuryMachineTool , eleT_EMployeeInjuryMachineTool, "t_employeeinjurymachinetool");
	}
	else {
            var resT_EMployeeInjuryMachineTool = "@parentUrl["t_employeeinjurymachinetool"]".split(",");
            var eleT_EMployeeInjuryMachineTool = document.getElementById("t_employeeinjurymachinetool");
			FillMultiSelectDropDown(resT_EMployeeInjuryMachineTool , eleT_EMployeeInjuryMachineTool, "t_employeeinjurymachinetool");
         }
 if ("@parentUrl["t_initialtreatmentlist"]" != null && "@parentUrl["t_initialtreatmentlist"]".length > 0) {
            var resT_InitialTreatmentList = "@parentUrl["t_initialtreatmentlist"]".split(",");
            var eleT_InitialTreatmentList = document.getElementById("t_initialtreatmentlist");
			FillMultiSelectDropDown(resT_InitialTreatmentList , eleT_InitialTreatmentList, "t_initialtreatmentlist");
	}
	else {
            var resT_InitialTreatmentList = "@parentUrl["t_initialtreatmentlist"]".split(",");
            var eleT_InitialTreatmentList = document.getElementById("t_initialtreatmentlist");
			FillMultiSelectDropDown(resT_InitialTreatmentList , eleT_InitialTreatmentList, "t_initialtreatmentlist");
         }
 if ("@parentUrl["t_employeeinjurymedicalfacilityfortreatment"]" != null && "@parentUrl["t_employeeinjurymedicalfacilityfortreatment"]".length > 0) {
            var resT_EmployeeInjuryMedicalFacilityForTreatment = "@parentUrl["t_employeeinjurymedicalfacilityfortreatment"]".split(",");
            var eleT_EmployeeInjuryMedicalFacilityForTreatment = document.getElementById("t_employeeinjurymedicalfacilityfortreatment");
			FillMultiSelectDropDown(resT_EmployeeInjuryMedicalFacilityForTreatment , eleT_EmployeeInjuryMedicalFacilityForTreatment, "t_employeeinjurymedicalfacilityfortreatment");
	}
	else {
            var resT_EmployeeInjuryMedicalFacilityForTreatment = "@parentUrl["t_employeeinjurymedicalfacilityfortreatment"]".split(",");
            var eleT_EmployeeInjuryMedicalFacilityForTreatment = document.getElementById("t_employeeinjurymedicalfacilityfortreatment");
			FillMultiSelectDropDown(resT_EmployeeInjuryMedicalFacilityForTreatment , eleT_EmployeeInjuryMedicalFacilityForTreatment, "t_employeeinjurymedicalfacilityfortreatment");
         }
 if ("@parentUrl["t_employeeinjuryrefusal"]" != null && "@parentUrl["t_employeeinjuryrefusal"]".length > 0) {
            var resT_EmployeeInjuryRefusal = "@parentUrl["t_employeeinjuryrefusal"]".split(",");
            var eleT_EmployeeInjuryRefusal = document.getElementById("t_employeeinjuryrefusal");
			FillMultiSelectDropDown(resT_EmployeeInjuryRefusal , eleT_EmployeeInjuryRefusal, "t_employeeinjuryrefusal");
	}
	else {
            var resT_EmployeeInjuryRefusal = "@parentUrl["t_employeeinjuryrefusal"]".split(",");
            var eleT_EmployeeInjuryRefusal = document.getElementById("t_employeeinjuryrefusal");
			FillMultiSelectDropDown(resT_EmployeeInjuryRefusal , eleT_EmployeeInjuryRefusal, "t_employeeinjuryrefusal");
         }
 if ("@parentUrl["t_typeofclaim"]" != null && "@parentUrl["t_typeofclaim"]".length > 0) {
            var resT_TypeofClaim = "@parentUrl["t_typeofclaim"]".split(",");
            var eleT_TypeofClaim = document.getElementById("t_typeofclaim");
			FillMultiSelectDropDown(resT_TypeofClaim,  eleT_TypeofClaim, "t_typeofclaim");
	}
	else
	{
	var resT_TypeofClaim = "@parentUrl["t_typeofclaim"]".split(",");
            var eleT_TypeofClaim = document.getElementById("t_typeofclaim");
			FillMultiSelectDropDown(resT_TypeofClaim,  eleT_TypeofClaim, "t_typeofclaim");
	}
 if ("@parentUrl["t_typeofrestrictions"]" != null && "@parentUrl["t_typeofrestrictions"]".length > 0) {
            var resT_TypeOfRestrictions = "@parentUrl["t_typeofrestrictions"]".split(",");
            var eleT_TypeOfRestrictions = document.getElementById("t_typeofrestrictions");
			FillMultiSelectDropDown(resT_TypeOfRestrictions,  eleT_TypeOfRestrictions, "t_typeofrestrictions");
	}
	else
	{
	var resT_TypeOfRestrictions = "@parentUrl["t_typeofrestrictions"]".split(",");
            var eleT_TypeOfRestrictions = document.getElementById("t_typeofrestrictions");
			FillMultiSelectDropDown(resT_TypeOfRestrictions,  eleT_TypeOfRestrictions, "t_typeofrestrictions");
	}
 }
    });

	  function FillMultiSelectDropDown(result, element, elementName) {
        var isHaveNullSelect = false;
        var countoptions = 0;

        for (var o = 0; o < element.options.length; o++) {
            if (result.indexOf(element.options[o].value)!=-1)
                element.options[o].selected = true;
            else if (result.indexOf("NULL")!=-1)
                isHaveNullSelect = true;
            countoptions++;
        }
        var opt = document.createElement('option');
        opt.value = "NULL";
        opt.innerHTML = "None";
        if (isHaveNullSelect) {
            opt.selected = true;
            element.insertBefore(opt, element.firstChild);
        }
        if (!isHaveNullSelect) {
            element.insertBefore(opt, element.firstChild);
        }
        $("#" + elementName).multiselect("rebuild");
        if (countoptions >= 10) {
            var hostingentity = elementName;
            var urlGetAll = $('#' + hostingentity).attr("dataurl").replace("GetAllMultiSelectValue", "Index") + "?BulkOperation=multiple";
            var dispName = ($("label[for=\"" + hostingentity + "\"]").text());
            var link = "<a onclick=\"" + "OpenPopUpBulkOperation('PopupBulkOperation','" + hostingentity + "','" + dispName + "','dvPopupBulkOperation','" + urlGetAll + "')\">View All</a>";
            var getall = "<li class='disabled-result disabled-result' style='font-style:Italic;text-decoration:underline;' >" + link + "</li>";
            var $ul = $("ul", "#dv" + elementName);
            $ul.append($(getall));
        }
    }
</script>

<script type="text/javascript">
    // Criteria Javascript Methods
    function checkOperator(operator) {
        var operand = operator;
        switch (operator) {
            case "&gt;":
                {
                    operand = ">";
                    break;
                }
            case "&lt;":
                {
                    operand = "<";
                    break;
                }
            case "&gt;=":
                {
                    operand = ">=";
                    break;
                }
            case "&lt;=":
                {
                    operand = "<=";
                    break;
                }
        }
        return operand;
    }
    function FillCriteriaValue(obj) {
        var propertyName = $("#" + obj.id).val();
        var entityName = '@ViewBag.EntityName';
        $("#" + "OperatorList").html('');
        $.ajax({
            url: '@Url.Action("GetDateType", "BusinessRule")' + '?entityName=' + entityName + '&propertyName=' + propertyName,
            type: "GET",
            cache: false,
            async: false,
            success: function (result) {
                var optionDOM = '<option value="0">-- Select --</option>';
                optionDOM += '<option value="=">Equals to</option>';
                if (result == "String") {
                    optionDOM += '<option value="Contains">Contains</option>';
                }
                else if (result != "Boolean") {
                    optionDOM += '<option value=">">Greater than</option>';
                    optionDOM += '<option value="<">Less than</option>';
                    optionDOM += '<option value="<=">Less than Or Equals to</option>';
                    optionDOM += '<option value=">=">Greater than Or Equals to</option>';
                }
                optionDOM += '<option value="!=">Not Equals to</option>';
                $("#" + "OperatorList").html(optionDOM);
            },
            error: function (jqXHR, textStatus, errorThrown) {

            }
        });
    }
    function GetSecondLevelAttributeForCriteria() {
        var SelectedEntity = '@ViewBag.EntityName';
        var SelectedProperty = $("#" + "PropertyList").val();
        $("#" + "AssociationPropertyList").hide();
        $("#" + "AssociationPropertyList").html('');
        $.ajax({
            url: '@Url.Action("GetAttributesofTargetEntity", "BusinessRule")' + '?Entity=' + SelectedEntity + '&AttributeName=' + SelectedProperty,
            type: "GET",
            cache: false,
            success: function (result) {
                var optionDOM = '<option value="SelectProperty">-- Select Association Property --</option>';
                for (i = 0; i < result.length; i++) {
                    //optionDOM += '<option value="' + result[i].Name + '">' + result[i].DisplayName + '</option>';
					optionDOM += '<option class="' + result[i].DataType + '" value="' + result[i].Name + '">' + result[i].DisplayName + '</option>';
                }

                if (result.length == 0) {
                    $("#" + "AssociationPropertyList").html('');
                    $("#" + "AssociationPropertyList").hide();
                }
                else {
                    $("#" + "AssociationPropertyList").show();
                    $("#" + "AssociationPropertyList").html(optionDOM);
                }
                FillSugestedDynamicValuesForCriteria();
            },
            error: function (jqXHR, textStatus, errorThrown) {
                alert("error");
            }
        });
    }
    function FillSugestedDynamicValuesForCriteria() {
        var text = $("#" + "PropertyList option:selected").text();
        if ($("#" + "AssociationPropertyList").val() != null && $("#" + "AssociationPropertyList").val().length > 0) {
            var value = "[" + $("#" + "PropertyList").val() + "." + $("#" + "AssociationPropertyList").val() + "]";
        }
        else {
            var value = "[" + $("#" + "PropertyList").val() + "]";
        }
    }
    function GetCriteriaSuggestedValues(obj) {
        $("#dvRule7DynamicValueInCondition").hide();
        $("#" + "ConditionValue").val('');

        if ($("#ValueTypeList option:selected").text() == "Pick From List") {
            var SelectedProperty = $("#" + "PropertyList").val();
            var SelectedEntity = '@ViewBag.EntityName';
            if (SelectedEntity.length == 0) {
                alert("Please select an Entity first !");
                return false;
            }
            if (SelectedProperty.length == 0) {
                alert("Please select a Property !");
                return false;
            }

            var assocProp = $("#AssociationPropertyList").val();
            if (assocProp == "SelectProperty") {
                alert("Please select Association Property.");
                return false;
            }
            var hostingEntity = "";
			var propType = "Property";
            $.ajax({
                url: '@Url.Action("GetDropdown", "BusinessRule")' + '?Entity=' + SelectedEntity + '&Property=' + SelectedProperty,
                type: "GET",
                cache: false,
                success: function (result) {
                    if (result != "Failure") {
                        $("#" + "dvSuggestedPropertyValue").show();
                        $("#" + "ConditionValue").hide();
						//
						var selectedoptionclass = $('option:selected', $('#AssociationPropertyList')).attr('class');
                        if (selectedoptionclass != undefined && selectedoptionclass == "Int64")
                        {
                           
                            $.ajax({
                                url: '@Url.Action("GetTargetEntityOfAssociationProperty", "BusinessRule")' + '?Entity=' + result + '&AttributeName=' + assocProp,
                                type: "GET",
                                cache: false,
                                async: false,
                                success: function (data) {
                                        result = data.Name;
                                        assocProp = "DisplayValue";
										propType = "Association";
                                }
                            });
                        }
						//
                        hostingEntity = result;
                        $("#SuggestedPropertyValue").attr("dataurl", '@Url.Action("GetAllMultiSelectValueForBR", "_Entity", null)'.replace("_Entity", result) + '?propNameBR=' + assocProp);
                        if (hostingEntity != "") {
                            var dataurl = '@Url.Action("GetAllMultiSelectValueForBR", "_Entity", null)'.replace("_Entity", result) + '?propNameBR=' + assocProp;
                            $.ajax({
                                url: dataurl,
                                type: "GET",
                                cache: false,
                                async: false,
                                success: function (result) {
                                    var countItems = 0
                                    var optionDOM = "";
                                    for (i = 0; i < result.length; i++) {
                                        if (result[i] != null)
											optionDOM += '<option class="'+propType+'" value="' + result[i].Id + '">' + result[i].value + '</option>';
                                            //optionDOM += '<option value="' + i + '">' + result[i] + '</option>';
                                        countItems++;
                                    }
                                    $("#SuggestedPropertyValue").html(optionDOM);
                                    $("#SuggestedPropertyValue").multiselect('rebuild');
                                },
                                error: function (jqXHR, textStatus, errorThrown) {
                                    alert("error");
                                }
                            });
                        }
                    }
                    else {
                        alert("Supports only association values.");
                        $("#ValueTypeList :nth(0)").prop("selected", "selected").change();
                        hostingEntity = "";
                        $("#" + "dvSuggestedPropertyValue").hide();
                        $("#" + "ConditionValue").show();
                        $("#" + "SuggestedPropertyValue").removeClass = "chosen-select form-control";
                        $("#" + "SuggestedPropertyValue").removeAttr("HostingName");
                        $("#" + "SuggestedPropertyValue").removeAttr("dataurl");
                    }
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    alert("error");
                }
            });
        }
        else if ($("#ValueTypeList option:selected").text() == "Dynamic") {
            $("#dvSuggestedPropertyValue").hide();
            $("#ConditionValue").val('');
            $("#ConditionValue").hide();
            GetSecondLevelAttributeInCriteria();
            $("#dvRule7DynamicValueInCondition").show();
        }
        else { $("#" + "dvSuggestedPropertyValue").hide(); $("#" + "ConditionValue").show(); $("#" + "ConditionValue").prop("disabled", false); }
    }
    function FillCriteriaForAssociation() {
        var entityName = '@ViewBag.EntityName';
        var assocName = $("#PropertyList").val();
        var propertyName = $("#AssociationPropertyList").val();
        $("#" + "OperatorList").html('');
        $.ajax({
            url: '@Url.Action("GetDateTypeForAssociationProperties", "BusinessRule")' + '?entityName=' + entityName + '&assocName=' + assocName + '&propertyName=' + propertyName,
            type: "GET",
            cache: false,
            async: false,
            success: function (result) {
                var optionDOM = '<option value="0">--- Select ---</option>';
                optionDOM += '<option value="=">Equals to</option>';
                if (result == "String") {
                    optionDOM += '<option value="Contains">Contains</option>';
                }
                else if (result != "Boolean") {
                    optionDOM += '<option value=">">Greater than</option>';
                    optionDOM += '<option value="<">Less than</option>';
                    optionDOM += '<option value="<=">Less than Or Equals to</option>';
                    optionDOM += '<option value=">=">Greater than Or Equals to</option>';
                }
                optionDOM += '<option value="!=">Not Equals to</option>';
                $("#" + "OperatorList").html(optionDOM);
            },
            error: function (jqXHR, textStatus, errorThrown) {
            }
        });
    }
    function SetCriteriaValueType(obj) {
        if (obj.id == "OperatorList") {
            $("#ValueTypeList").val('Constant').change();
        }
    }
    function GetSecondLevelAttributeInCriteria() {
        var SelectedEntity = '@ViewBag.EntityName';
        var SelectedProperty = $("#" + "SuggestedDynamicValueInCondition7").val();
        $("#" + "SuggestedDynamicValueInCondition71").hide();
        $("#" + "SuggestedDynamicValueInCondition71").html('');
        $.ajax({
            url: '@Url.Action("GetAttributesofTargetEntity", "BusinessRule")' + '?Entity=' + SelectedEntity + '&AttributeName=' + SelectedProperty,
            type: "GET",
            cache: false,
            success: function (result) {
                var optionDOM = '<option value="SelectProperty">--Select Association Property--</option>';
                for (i = 0; i < result.length; i++) {
                    //optionDOM += '<option value="' + result[i].Name + '">' + result[i].DisplayName + '</option>';
					optionDOM += '<option class="' + result[i].DataType + '" value="' + result[i].Name + '">' + result[i].DisplayName + '</option>';
                }

                if (result.length == 0) {
                    $("#" + "SuggestedDynamicValueInCondition71").html('');
                    $("#" + "SuggestedDynamicValue71").hide();
                }
                else {
                    $("#" + "SuggestedDynamicValueInCondition71").show();
                    $("#" + "SuggestedDynamicValueInCondition71").html(optionDOM);
                }
            },
            error: function (jqXHR, textStatus, errorThrown) {
                alert("error");
            }
        })
    }
    function AddCriteriaInGrid() {

        if ($("#PropertyList option:selected").val() == "SelectProperty" || $("#PropertyList option:selected").val() == "") {
            alert("Please select Property for condition.");
            return false;
        }
		if ($("#OperatorList").val() == ""  || $("#OperatorList").val() == "0") {
            alert("Please select Operator for condition.");
            return false;
        }
		if ($("#ConditionValue").val().trim() == "" && $("#ValueTypeList").val() != "Pick From List") {
            alert("Please enter Property Value for condition.");
            return false;
        }
        if ($("#AssociationPropertyList").val() != null && $("#AssociationPropertyList").val() != "") {
            if ($("#AssociationPropertyList option:selected").val() == "SelectProperty") {
                alert("Please select Association Property.");
                return false;
            }
            var option_all = $("#SuggestedPropertyValue option:selected").map(function () {
               // return $(this).text();
			   if ($(this).attr("class") == "Association")
                    return $(this).val();
               else
                  return $(this).text(); 
            }).get().join();
            if (option_all != "")
                $("#ConditionValue").val(option_all);
            $("#SuggestedPropertyValue option:selected").removeAttr("selected");
            $("#SuggestedPropertyValue").multiselect('rebuild');
        }
        //Dynamic
        var dynamicPropertyDispValue = "";
        if ($("#ValueTypeList option:selected").text() == "Dynamic") {
            if ($("#" + "SuggestedDynamicValueInCondition71").val() != null && $("#" + "SuggestedDynamicValueInCondition71").val().length > 0) {
                var value = "[" + $("#" + "SuggestedDynamicValueInCondition7").val() + "." + $("#" + "SuggestedDynamicValueInCondition71").val() + "]";
                dynamicPropertyDispValue = "[" + $("#" + "SuggestedDynamicValueInCondition7 option:selected").text() + "." + $("#" + "SuggestedDynamicValueInCondition71 option:selected").text() + "]";
                $("#" + "ConditionValue").val(value);
            }
            else {
                var value = "[" + $("#" + "SuggestedDynamicValueInCondition7").val() + "]";
                dynamicPropertyDispValue = "[" + $("#" + "SuggestedDynamicValueInCondition7 option:selected").text() + "]";
                $("#" + "ConditionValue").val(value);
            }
        }
        //Dynamic
        var condValue = $("#ConditionValue").val();
        var str = "<tr>";
        var entityName = '@ViewBag.EntityName';
        var val1Text = $("#PropertyList option:selected").text();
        var val1 = $("#PropertyList").val();
        var val2 = $("#OperatorList").val();
        var val3 = $("#ConditionValue").val();
        var val4 = $("#LogicalConnectorList option:selected").text();
        var val5 = $("#ValueTypeList").val();

        if ($("#AssociationPropertyList").val() != null && $("#AssociationPropertyList").val() != "") {
            val1 = "[" + val1 + "." + $("#AssociationPropertyList").val() + "]";
            val1Text = "[" + val1Text + "." + $("#AssociationPropertyList option:selected").text() + "]";
            CreateCriteriaForAssociation(entityName, condValue, val1, val1Text, val5, dynamicPropertyDispValue);
            return true;
        }

        var funcval = val1 + "," + val2 + "," + val3 + "," + val4 + "?";
        var val = $("#FilterCondition").val();
        val += val1 + "," + val2 + "," + val3 + "," + val4 + "?";

        if ($("#ValueTypeList option:selected").text() == "Dynamic" && dynamicPropertyDispValue != "") {
            val3 = dynamicPropertyDispValue;
        }

        str += "<td>" + val1Text + "</td>";
        str += "<td>" + val2 + "</td>";
        str += "<td>" + val3 + "</td>";
        str += "<td>" + val4 + "</td>";
        str += "<td><i name=\"FilterCondition\" onclick=\"deleteRowCriteria(this,'" + funcval + "');\" class=\"fam-delete\"></i></td>";

        var exMsg = VerifyPropertyAndValueDataType(entityName, val1, $("#ConditionValue").val(), val5, 'condition');
        if (exMsg != "" && exMsg != null) {
            $("#ConditionValue").val('');
            alert('Please enter correct Property Value. ' + exMsg);
            return false;
        }

        $("#FilterCondition").val(val);
        $('#tblConditionList').show();
        $('#tblConditionList').append(str);
        $("#DurationCount").val('');
        $("#ConditionValue").val('');
    }
    function CreateCriteriaForAssociation(entityName, param, assocName, assocDispName, valueType, dynamicDispName) {
        var arrCond = param.split(",");
        var val = $("#FilterCondition").val();
        var operator = $("#OperatorList").val();

        var exMsg = VerifyPropertyAndValueDataType(entityName, assocName, param, valueType, 'condition');
		 if (valueType != "Pick From List") {
			if (exMsg != "" && exMsg != null) {
				$("#ConditionValue").val('');
				alert('Data types of selected properties did not match. Please select compatible properties. ' + exMsg);
				return false;
			}
		}
        var logicalConnector = $("#LogicalConnectorList").val();

        if (valueType == "Pick From List") {
            logicalConnector = "OR";
        }

        for (i = 0; i < arrCond.length; i++) {
            if (i == arrCond.length - 1) {
                logicalConnector = $("#LogicalConnectorList").val();
            }
            if (valueType != "Dynamic")
                dynamicDispName = arrCond[i];
            val += assocName + ',' + operator + ',' + arrCond[i] + ',' + logicalConnector + '?';
            var str = "<tr><td>" + assocDispName + "</td><td>" + operator + "</td><td>" + dynamicDispName + "</td><td>" + logicalConnector + "</td>";
            str += "<td><i name=\"FilterCondition\" onclick=\"deleteRowCriteria(this,'" + assocName + ',' + operator + ',' + dynamicDispName + ',' + logicalConnector + '' + "');\" class=\"fam-delete\"></i></td>";
            $("#FilterCondition").val(val);
            $('#tblConditionList').show();
            $('#tblConditionList').append(str);
            $("#ConditionValue").val('');
        }
    }
    function VerifyPropertyAndValueDataType(entityName, propertyName, conditionValue, valueType, actionType) {
        var propDataType = "";
        $.ajax({
            url: '@Url.Action("VerifyPropertyAndValueDataType", "BusinessRule")' + '?entityName=' + entityName + '&propertyName=' + propertyName + "&conditionValue=" + conditionValue + "&valueType=" + valueType + "&actionType=" + actionType,
            type: "GET",
            cache: false,
            async: false,
            success: function (result) {
                propDataType = result;
            }
        });
        return propDataType;
    }
    function deleteRowCriteria(obj, val) {
        var obj_tr = $(obj).closest("tr");
        var newobj = $("#" + $(obj).attr("name")).val().replace(val, "");
        $("#" + $(obj).attr("name")).val(newobj);
        obj_tr.remove();
    }
$(document).ready(function () {
        $(':input').each(function () {
            var valid = $(this).attr("id");
            if (valid != 'LogicalConnectorList' && valid != 'ValueTypeList' && valid != 'DisplayLayout' && valid != 'inbuiltSearchCriteria') {
                if ($(this).val() != null && $(this).val().length > 0)
                    $(this).css("border-color", "orange")
            }
        });
        $('.fsearch .btn').each(function () {
            if ($(this).attr("title") != null && $(this).attr("title") != 'ALL' && $(this).attr("title") != 'None selected') {
                $(this).attr("style", "border-color:orange !important;")
            }
        });

    });
</script>
<div class="modal fade" aria-hidden="true" id="dvalert">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" onclick="closealert();" data-dismiss="modal" aria-hidden="true">&times;</button>
                <center><h4 class="modal-title"> Employee Injury </h4></center>
                <div class="alert alert-warning" id="alertbody">
                </div>
                <button type="button" class="btn btn-default btn-sm" onclick="closealert();" data-dismiss="modal" aria-hidden="true">OK</button>
            </div>
        </div>
    </div>
</div>

    <div class="modal fade" id="ShowGraphT_EmployeeInjury" tabindex="-1" role="dialog" aria-labelledby="ShowGraphT_EmployeeInjuryLabel" aria-hidden="true">
        <div class="modal-dialog" style="width:80%">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title" id="ShowGraphT_EmployeeInjuryLabel">Dashboard @EntityDisplayName</h4>
                </div>
				 <div  class="modal-body" >
						<div id="dvShowGraphT_EmployeeInjury" data-url="@Url.Action("ShowGraph", "T_EmployeeInjury" , new { type = "all" })">
						</div>
						<div style="clear:both"></div>
                </div>
                
            </div>
        </div>
    </div>

